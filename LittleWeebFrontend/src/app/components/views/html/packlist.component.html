<div class="ui basic segment ">   
    <div class="row deskContent"  *ngIf="this.animeInfo.relations !== undefined">
            <div class="ui link cards custom-size-info-card-left">
                <div class="card">
                    <div class="image">
                    <img [src]="this.animeInfo.animeInfo.posterImage.large">
                    </div>
                    <div class="content">
                    <div class="header">{{this.animeInfo.animeInfo.canonicalTitle}}</div>
                    <div class="meta">
                        <a>Genres</a>
                    </div>
                    <div class="description">                      
                        <div *ngFor="let genre of this.animeInfo.relations.genres">
                            <span *ngIf="genre !== undefined">
                            {{genre.attributes.name}},
                            </span>
                        </div>
                        <hr>
                        <p>
                            <button class="ui inverted blue button" (click)="addToFavorites(this.animeInfo)"> Add To Favorites </button>
                        </p>
                    </div>
                    </div>
                    <div class="extra content">
                        <span class="right floated">
                        <i class="users icon"></i>
                            {{this.animeInfo.animeInfo.favoritesCount}} Members 
                        </span>
                        <span>
                            <i class="star icon"></i>
                            Score {{this.animeInfo.animeInfo.averageRating}} 
                        </span>
                    </div>
                </div>

                <div class="card custom-size-info-card-right">
                    <div class="image ">
                        <iframe  class="youtube-size " [src]="'https://www.youtube.com/embed/'+ this.animeInfo.animeInfo.youtubeVideoId  | safe" frameborder="0">
                        </iframe>
                    </div>
                    <div class="content " >
                        <div class="header">Synopsis</div>
                        <div class="meta">
                            <span class="date"></span>
                        </div>
                        <div class="content ">
                            <div class="description" [innerHtml]="this.animeInfo.animeInfo.synopsis">
                            </div>
                        </div>
                        <div class="extra content">
                            <span class="right">
                                <i class="file video outline icon"></i>
                                Status: {{this.animeInfo.animeInfo.status}}
                            </span>
                            <span>
                                <i class="television icon"></i>
                                Type: {{this.animeInfo.animeInfo.subtype}}
                            </span>                        
                        </div>
                    </div>
                </div>
            </div>            
      <div class="divider ui"></div> 
    </div>   
    <div class="row phoneContent"  *ngIf="this.animeInfo.relations !== undefined">

        <div class="ui secondary pointing three item menu phoneContent">                
            <a class="ui item" (click)="showInfo = false; showEpisodes = true; showTrailer = false;">
                <i class="play icon ">  </i> Episodes
            </a> 
            <a class="ui item" (click)="showInfo = true; showEpisodes = false; showTrailer = false;" >
                <i class="info icon ">  </i> Anime Info
            </a>   
            <a class="ui item" (click)="showInfo = false; showEpisodes = false; showTrailer = true;" >
                <i class="film icon ">  </i> Trailer
            </a>                            
        </div>
        <div class="ui link cards min-width-100" *ngIf="showEpisodes">
            <div class="card custom-card-size-left">
                <div class="image">
                    <img  [src]="this.animeInfo.animeInfo.posterImage.large">
                </div>
                    <div class="content">
                        <div class="header">{{this.animeInfo.animeInfo.canonicalTitle}}</div>
                    <div class="description">                    
                        <button class="ui inverted blue button" (click)="addToFavorites(this.animeInfo)"> Add To Favorites </button>
                    </div>               
                </div>
            </div>

            <div class="card custom-card-size-right">              
                <div class="content " >
                    <div class="header">Synopsis</div>
                   
                    <div class="content ">
                        <div class="description" [innerHtml]="this.animeInfo.animeInfo.synopsis">
                        </div>
                    </div>
                </div>
            </div>
        </div>     
        <div class="ui link cards min-width-100" *ngIf="showInfo">
            <div class="card custom-card-size-orientation">
                <div class="image">
                <img [src]="this.animeInfo.animeInfo.posterImage.large">
                </div>
                <div class="content">
                <div class="header">{{this.animeInfo.animeInfo.canonicalTitle}}</div>
                <div class="description">                    
                        <button class="ui inverted blue button" (click)="addToFavorites(this.animeInfo)"> Add To Favorites </button>
                </div>
                </div>
                <div class="extra content">
                    <span class="right floated">
                    <i class="users icon"></i>
                        {{this.animeInfo.animeInfo.favoritesCount}} Members 
                    </span>
                    <span>
                        <i class="star icon"></i>
                        Score {{this.animeInfo.animeInfo.averageRating}} 
                    </span>
                </div>
            </div>

            <div class="card custom-card-size-orientation">
                <div class="content " >
                    <div class="header">Synopsis & Genres</div>
                    <div class="meta">
                        <span class="date"></span>
                    </div>
                    <div class="content ">
                       
                        <b>Genres:</b>
                        <span *ngIf="this.animeInfo.relations.genres !== undefined && this.animeInfo.relations.genres != ''">
                            <div *ngFor="let genre of this.animeInfo.relations.genres">
                                <span *ngIf="genre !== undefined && genre != ''">
                                {{genre.attributes.name}},
                                </span>
                            </div>
                        </span>
                        <hr>
                        <div class="description" [innerHtml]="this.animeInfo.animeInfo.synopsis">
                        </div>
                    </div>
                    <div class="extra content">
                        <span class="right">
                            <i class="file video outline icon"></i>
                            Status: {{this.animeInfo.animeInfo.status}}
                        </span>
                        <span>
                            <i class="television icon"></i>
                            Type: {{this.animeInfo.animeInfo.subtype}}
                        </span>                        
                    </div>
                </div>
            </div>
        </div>    
           <div class="ui link cards height-100" *ngIf="showTrailer">

            <div class="card width-100 height-100">
                <iframe  class="youtube-size " [src]="'https://www.youtube.com/embed/'+ this.animeInfo.animeInfo.youtubeVideoId  | safe" frameborder="0">
                </iframe>
            </div>
        </div>                
      <div class="divider ui"></div> 
    </div>    
    
    <div class="ui two column grid" *ngIf="showList && showEpisodes ">
        <div class="row">
            <div class="column">
                <div class="ui selection dropdown fixed-width-150" >
                    <input type="hidden" name="botanime" class="fixed-width-150">
                    <i class="dropdown icon"></i>
                    <div class="default text">All Bots</div>
                    <div class="menu botlist min-width-7"  >  
                        <div class="item" (click)="showBot('all')" >All Bots</div>
                        <div class="item" *ngFor="let bot of botList"  (click)="showBot(bot)"  >{{bot}}</div>
                    </div>
                </div>
                <div class="ui selection dropdown fixed-width-150" >
                    <input type="hidden" name="resolutionAnime"  class="fixed-width-150">
                    <i class="dropdown icon"></i>
                    <div class="default text">All Resolutions</div>
                    <div class="menu min-width-7" >                
                        <div class="item active" (click)="showResolution('all')">All Resolutions</div>
                        <div class="item" (click)="showResolution('480')" >480p</div>
                        <div class="item" (click)="showResolution('720')" >720p</div>
                        <div class="item" (click)="showResolution('1080')" >1080p</div>
                    </div>
                </div>
                
                <button class="ui inverted blue button" (click)="showAll()"> Show all </button>
                <button class="ui inverted blue button" (click)="closeAll()"> Close all</button>
                <button class="ui inverted blue button" (click)="batchAll()"> Download Full Anime (Experimental!)</button>
            </div>           
        </div>
    </div>
    <div class="row center-text"  *ngIf="showError">
        <h3> :( Something happend and I couldn't find files for your anime!</h3> 
        
        <div class="divider ui"></div> 

        <h4> Go to the <a href="/settings"> Settings </a> page to select search strictness, where lower means that it's more likely to find files which might not be related to the anime in question. But in case that the files have different names than the original anime title then you could use that.</h4>
    </div>
    
    

    <div class="row" *ngIf="showList && showEpisodes ">                    
        <div class="ui styled accordion episodeList min-width-100 " id="packs">
            <div *ngFor="let episodes of episodeList; let i=index; "  >
                <div *ngIf="episodes != 'not defined'">

                    <div class="title" id="{{episodes[0].episodeNumber}}" *ngIf="episodes != 'not defined'" >
                        <i class="dropdown icon"></i>
                        <button class="ui green inverted button" (click)="selectBestEpisode(episodes[0].episodeNumber)" > Download </button>
                        <button class="ui green inverted button" (click)="playEpisode(episodes[0].episodeNumber)" > Download & Play </button>
                        <label>Episode {{episodes[0].episodeNumber}} - {{episodes[0].episodeTitle}}</label>
                    </div>               
                    <div class="content" *ngIf="episodes[0] != 'not defined'" >
                        

                        <table class="ui very basic table bg-white min-width-100">
                            <thead>
                                <tr>
                                <th class="width-20">Batch Select</th>
                                <th class="width-20">Download</th>
                                <th class="width-20">Bot</th>
                                <th class="width-20">Filename</th>
                                <th class="width-20">FileSize</th>
                                </tr>
                            </thead>
                            <tbody id="listWithFiles">
                                <tr *ngFor="let episode of episodes[0].files; let b=index">
                                    <ng-container *ngIf="checkIfStringContiains(episode.name, resolution) || showAllResolutions">
                                        <ng-container *ngIf="checkIfStringContiains(episode.botId, botname) || showAllBots"> 
                                            <td>
                                                <div class="ui checkbox">
                                                <input type="checkbox" class="' + b + ' "  (click)="aCheckBoxChecked(episode)" /> 
                                                <label>Select</label>
                                                </div>
                                            </td>
                                            <td> 
                                                <button class="ui green inverted button" (click)="appendToDownloadsDirectly(episode)"> Download </button>
                                            </td>
                                            <td>{{episode.botId}}</td>
                                            <td>{{episode.name}}</td>
                                            <td>{{episode.size}}</td>                  
                                        </ng-container>
                                    </ng-container>
                                </tr>                 
                            </tbody>
                        </table>
                    </div>
                </div>
               
            </div>     
        </div>
        <hr>
        <div *ngIf="movieList[0] != 'not defined'">
            <div class="ui styled accordion episodeList min-width-100 " id="movies">                 
                <div class="title"  >
                    <i class="dropdown icon"></i>
                    <div class="ui checkbox">
                        <input type="checkbox"  (click)="selectBestMovie()" /> 
                        <label>Movies, OVA's, ONA's etc</label>
                    </div>
                </div>               
                <div class="content">                   

                    <table class="ui very basic table bg-white min-width-100">
                        <thead>
                            <tr>
                            <th class="width-20">Batch Select</th>
                            <th class="width-20">Download</th>
                            <th class="width-20">Bot</th>
                            <th class="width-20">Filename</th>
                            <th class="width-20">FileSize</th>
                            </tr>
                        </thead>
                        <tbody id="listWithFiles">
                            <tr *ngFor="let movie of movieList; let b=index">
                                <ng-container *ngIf="checkIfStringContiains(movie.name, resolution) || showAllResolutions">
                                    <ng-container *ngIf="checkIfStringContiains(movie.botId, botname) || showAllBots"> 
                                        <td>
                                            <div class="ui checkbox">
                                            <input type="checkbox" class="' + b + ' "  (click)="aCheckBoxChecked(movie)" /> 
                                            <label>Select</label>
                                            </div>
                                        </td>
                                        <td> 
                                            <button class="ui green inverted button" (click)="appendToDownloadsDirectly(movie)"> Download </button>
                                        </td>
                                        <td>{{movie.botId}}</td>
                                        <td>{{movie.name}}</td>
                                        <td>{{movie.size}}</td>                  
                                    </ng-container>
                                </ng-container>
                            </tr>                 
                        </tbody>
                    </table>
                
                </div>     
            </div>
        </div>
    </div> 
  
   
    <div class="sixteen wide row computer only bg-white min-width-100 position-fixed bottom-0"  *ngIf="packsSelected" >
                
        <button class="ui inverted blue button min-width-100 full-center"  (click)="appendToDownloads()"> Start Batch Download of {{selectedItems.length}} downloads</button>
        
    </div>
</div>
